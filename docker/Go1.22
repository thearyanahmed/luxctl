# Go 1.22 compile validator
# builds the project and exits with appropriate code
#
# usage: mount code at /app, run container
# exit 0 = build success, exit 1 = build failure

FROM golang:1.22

WORKDIR /app

# copy go.mod first for better caching
COPY go.mod go.sum* ./
RUN go mod download 2>/dev/null || true

# copy source and build
COPY . .
RUN go build -o /tmp/app .
